<div class="login-wrapper">
  <div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="login-form-container">
      <!-- Header -->
      <div class="text-center mb-4">
        <h1 class="h3 fw-bold">Sign In</h1>
        <p class="text-muted">Enter your credentials to continue</p>
      </div>

      <!-- Error Message -->
      @if (errorMessage()) {
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ errorMessage() }}
        <button type="button" class="btn-close" (click)="errorMessage.set('')"></button>
      </div>
      }

      <!-- Success Message -->
      @if (successMessage()) {
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ successMessage() }}
      </div>
      }

      <!-- Login Form -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <!-- Email Input -->
        <div class="mb-3">
          <label for="email" class="form-label">Email Address</label>
          <input
            type="email"
            class="form-control"
            [class.is-invalid]="email?.invalid && email?.touched"
            id="email"
            placeholder="your@email.com"
            formControlName="email"
          />
          @if (email?.invalid && email?.touched) {
          <div class="invalid-feedback d-block">
            @if (email?.errors?.['required']) {
            <span>Email is required</span>
            } @if (email?.errors?.['email']) {
            <span>Please enter a valid email</span>
            }
          </div>
          }
        </div>

        <!-- Password Input -->
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input
            type="password"
            class="form-control"
            [class.is-invalid]="password?.invalid && password?.touched"
            id="password"
            placeholder="••••••••"
            formControlName="password"
          />
          @if (password?.invalid && password?.touched) {
          <div class="invalid-feedback d-block">
            @if (password?.errors?.['required']) {
            <span>Password is required</span>
            } @if (password?.errors?.['minlength']) {
            <span>Password must be at least 6 characters</span>
            }
          </div>
          }
        </div>

        <!-- Remember Me -->
        <div class="form-check mb-4">
          <input
            class="form-check-input"
            type="checkbox"
            id="remember"
            formControlName="remember"
          />
          <label class="form-check-label" for="remember"> Remember me </label>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn btn-primary w-100 py-2 fw-semibold"
          [disabled]="!isFormValid || isLoading()"
        >
          @if (!isLoading()) {
          <span>Sign In</span>
          } @if (isLoading()) {
          <span>
            <span
              class="spinner-border spinner-border-sm me-2"
              role="status"
              aria-hidden="true"
            ></span>
            Signing in...
          </span>
          }
        </button>
      </form>

      <!-- Divider -->
      <div class="my-4 text-center">
        <small class="text-muted">or</small>
      </div>

      <!-- Google Sign-In Button -->
      <app-google-signin-button
        [googleClientId]="googleClientId"
        buttonContainerId="google-signin-button"
      ></app-google-signin-button>
      <div id="google-signin-button"></div>

      <!-- Footer Links -->
      <div class="text-center">
        <p class="mb-3">
          <a href="#" class="text-decoration-none">Forgot password?</a>
        </p>
        <p class="text-muted mb-0">
          Don't have an account?
          <a href="/register" class="text-decoration-none fw-semibold">Sign up</a>
        </p>
      </div>
    </div>
  </div>
</div>
